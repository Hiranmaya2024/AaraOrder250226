<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Aaradhya Pharma</title>

<style>
body{
margin:0;
font-family:Arial, sans-serif;
background:#f2f2f2;
overflow:hidden;
}

/* APP CONTAINER */
.app{
position:relative;
width:100%;
height:100vh;
overflow:hidden;
}

/* SCREENS */
.screen{
position:absolute;
width:100%;
height:100%;
top:0;
left:100%;
background:#f2f2f2;
overflow-y:auto;
transition:.35s;
}

.screen.active{ left:0; }

/* HEADER */
.header{
background:#0a7cff;
color:white;
padding:12px;
display:flex;
justify-content:space-between;
align-items:center;
position:sticky;
top:0;
}

/* CARDS */
.card,.company{
background:white;
margin:10px;
padding:12px;
border-radius:10px;
box-shadow:0 2px 6px rgba(0,0,0,.15);
}

button{
background:#0a7cff;
color:white;
border:none;
padding:8px 14px;
border-radius:8px;
font-weight:bold;
}

/* CENTER SCREEN */
.center{
display:flex;
justify-content:center;
align-items:center;
height:100%;
font-size:22px;
font-weight:bold;
text-align:center;
cursor:pointer;
}
</style>
</head>

<body>

<div class="app">

<!-- LOADING -->
<div id="loading" class="screen active">
<div class="center">Loading...</div>
</div>

<!-- WELCOME -->
<div id="welcome" class="screen">
<div class="center">Welcome To Aaradhya Pharmaceuticals<br><br>Tap to Continue</div>
</div>

<!-- HOME -->
<div id="home" class="screen">
<div class="header">
<b>Companies</b>
<button onclick="openCart()">üõí Cart</button>
</div>
<div id="companyList"></div>
</div>

<!-- PRODUCTS -->
<div id="products" class="screen">
<div class="header">
<button onclick="showScreen('home')">‚¨Ö</button>
<b id="companyTitle"></b>
<button onclick="openCart()">üõí</button>
</div>
<div id="productList"></div>
</div>

<!-- SUMMARY -->
<div id="summary" class="screen">
<div class="header">
<button onclick="showScreen('home')">üè†</button>
<b>Order Summary</b>
</div>
<div id="summaryData"></div>
<button style="width:90%;margin:15px" onclick="shareWhatsApp()">Share Order</button>
</div>

</div>

<script>
const csvUrl="https://docs.google.com/spreadsheets/d/e/2PACX-1vRV-mdlstMlh93FOZn0udO4eCUyryl_pDziljwksKkWGVdxE2LH8excr6D-cABN61O-JrFigpecb42i/pub?gid=0&single=true&output=csv";

let data=[],cart={};

/* NAVIGATION */
function showScreen(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"))
document.getElementById(id).classList.add("active")
}

/* LOADING FLOW */
setTimeout(()=>showScreen("welcome"),1200)

document.getElementById("welcome").onclick=()=>{
loadCSV()
showScreen("home")
}

/* LOAD CSV */
async function loadCSV(){
const res=await fetch(csvUrl)
const text=await res.text()
const rows=text.split("\n").slice(1)

data=rows.map(r=>{
let c=r.split(",")
return{
company:c[0],
name:c[1],
pack:c[2],
rate:c[3],
mrp:c[4]
}
})

showCompanies()
}

/* COMPANIES */
function showCompanies(){
let companies=[...new Set(data.map(d=>d.company))]
let html=""
companies.forEach(c=>{
html+=`<div class="company" onclick="showProducts('${c}')">${c}</div>`
})
companyList.innerHTML=html
}

/* PRODUCTS */
function showProducts(company){
showScreen("products")
companyTitle.innerText=company

let items=data.filter(d=>d.company===company)
let html=""

items.forEach(item=>{
html+=`
<div class="card">
<b>${item.name}</b><br>
${item.pack}<br>
MRP ‚Çπ${item.mrp} | Rate ‚Çπ${item.rate}
<br><br>
<button onclick="addItem('${item.name}')">Add to Cart</button>
</div>`
})

productList.innerHTML=html
}

/* CART */
function addItem(name){
cart[name]=(cart[name]||0)+1
}

function openCart(){
showScreen("summary")
let html="",total=0

for(let name in cart){
let item=data.find(d=>d.name===name)
let value=cart[name]*item.rate
total+=value
html+=`<div class="card">${name} x ${cart[name]} = ‚Çπ${value}</div>`
}

html+=`<h3 style="padding:10px">Total ‚Çπ${total}</h3>`
summaryData.innerHTML=html
}

/* WHATSAPP */
function shareWhatsApp(){
let text="Aaradhya Pharma Order%0A"
let total=0

for(let name in cart){
let item=data.find(d=>d.name===name)
let value=cart[name]*item.rate
total+=value
text+=`${name} x ${cart[name]} = ‚Çπ${value}%0A`
}

text+=`Total ‚Çπ${total}`
window.open(`https://wa.me/?text=${text}`)
}
</script>

</body>
</html>
